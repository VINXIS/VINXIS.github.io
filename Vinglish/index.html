<!DOCTYPE html>
<html>
<head>
  <title>Vinglish Translator</title>
  <meta name="description" content="Make your text look like as if I typed it!.">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:domain" content="vinxis.moe/Vinglish/">
  <meta property="og:type" content="website">
  <meta property="og:image" itemprop="image primaryImageOfPage" content="../vinxisOrange.png">
  <meta name="twitter:title" property="og:title" itemprop="title name" content="Vinglish Translator">
  <meta name="twitter:description" property="og:description" itemprop="description" content="Make your text look like as if I typed it!" >
  <meta property="og:url" content="http://vinxis.moe/Vinglish/">
  <meta property="og:url" content="http://www.vinxis.moe/Vinglish/">
  <link rel="shortcut icon" href="../vinxisOrange.png">
  <link rel="stylesheet" href="../index.css">
  <link rel="stylesheet" href="./index.css">
  <meta name="robots" content="index, follow, noodp">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
  <div class="top">
      <ul class="nav">
        <li><a href="/">Home</a></li>
        <li><a href="/Vinglish">Vinglish</a></li>
        <li class="cors">Corsace
          <ul class="corsace">
              <li class="gray">Website</li>
              <li><a href="https://discord.gg/Z6vEMsr">Discord</a></li>
            </ul>
        </li>
        <li class="ext">Ext. Links
          <ul class="links">
              <li><a href="https://vinxis.bandcamp.com">Bandcamp</a></li>
              <li><a href="https://soundcloud.com/vinxis">Soundcloud</a></li>
              <li><a href="https://www.youtube.com/user/OYKXF">Youtube</a></li>
              <li><a href="https://open.spotify.com/artist/2cNVX1qSKExpOojOx3INu8">Spotify</a></li>
              <li><a href="https://itunes.apple.com/us/artist/vinxis/1342478754">Apple Music</a></li>
              <li><a href="https://twitter.com/vinxis1">Twitter</a></li>
              <li><a href="https://osu.ppy.sh/u/4323406">osu!</a></li>
            </ul>
        </li>
      </ul>
    <span class="toggle">&#9776;</span>
  </div>
  <div class="centre vinglishCentre">
    <h1 class="vinglishHeader input">Input Text Here:</h1>
    <textarea class="inputText"></textarea>
    <div class="sliders">
      <div>
        Swap Factor
        <input type="range" min="0" max="0.80" value="0.08" step="0.01" id="swapFactor">
        <div id="swapSliderValue">0.08</div>
      </div>
      <div>
        Noise Factor
        <input type="range" min="0" max="0.80" value="0.20" step="0.01" id="noiseFactor">
        <div id="noiseSliderValue">0.20</div>
      </div>
      <div>
        Insertion Rate
        <input type="range" min="0" max="0.80" value="0.15" step="0.01" id="insertionRate">
        <div id="insertionSliderValue">0.15</div>
      </div>
    </div>
    <button class="vinglishButton" onclick="vinglishify()">Vinglishify!</button>
    <h1 class="vinglishHeader output">Output:</h1>
    <div class="outputText"></div>
  </div>
  <script>
  var eventFired = 0;

  if ($(window).width() < 1200) {
    $(".ext").click(function() {
      var size = $(".links").css("height");
      if (size === "0px") {
        $(".links").css("height", "256px");
      } else {
        $(".links").css("height", "0");
      }
    });
    $(".cors").click(function() {
      var size = $(".corsace").css("height");
      if (size === "0px") {
        $(".corsace").css("height", "64px");
      } else {
        $(".corsace").css("height", "0");
      }
    });
  } else {
    $(".toggle").click(function() {
      var navigation = $(".nav").css("opacity");
      if (navigation === "0") {
        $(".nav").css("opacity", "100");
        $(".top").css("left", "0");
      } else {
        $(".nav").css("opacity", "0");
        $(".top").css("left", "-95px");
        $("ul ul").css("height","0");
        $("ul ul").css("width","0");
      }
    });
    $(".ext").click(function() {
      var size = $(".links").css("height");
      if (size === "0px") {
        $(".links").css("height", "224px");
        $(".links").css("width", "89px");
      } else {
        $(".links").css("height", "0px");
        $(".links").css("width", "0px");
      }
    });
    $(".cors").click(function() {
      var size = $(".corsace").css("height");
      if (size === "0px") {
        $(".corsace").css("height", "64px");
        $(".corsace").css("width", "59px");
      } else {
        $(".corsace").css("height", "0px");
        $(".corsace").css("width", "0px");
      }
    });

    eventFired = 1;
  }

  $(window).on('resize', function() {
    if (!eventFired) {
      if ($(window).width() < 1200) {
        $(".nav").css("opacity", "100");
        $(".top").css("left", "0");
        $(".ext").click(function() {
          var size = $(".links").css("height");
          if (size === "0px") {
            $(".links").css("height", "256px");
          } else {
            $(".links").css("height", "0");
          }
        });
        $(".cors").click(function() {
          var size = $(".corsace").css("height");
          if (size === "0px") {
            $(".corsace").css("height", "64px");
          } else {
            $(".corsace").css("height", "0");
          }
        });
      } else {
        $(".toggle").click(function() {
          var navigation = $(".nav").css("opacity");
          if (navigation === "0") {
            $(".nav").css("opacity", "100");
            $(".top").css("left", "0");
          } else {
            $(".nav").css("opacity", "0");
            $(".top").css("left", "-95px");
            $("ul ul").css("height","0");
            $("ul ul").css("width","0");
          }
        });
        $(".ext").click(function() {
          var size = $(".links").css("height");
          if (size === "0px") {
            $(".links").css("height", "224px");
            $(".links").css("width", "89px");
          } else {
            $(".links").css("height", "0px");
            $(".links").css("width", "0px");
          }
        });
        $(".cors").click(function() {
          var size = $(".corsace").css("height");
          if (size === "0px") {
            $(".corsace").css("height", "64px");
            $(".corsace").css("width", "59px");
          } else {
            $(".corsace").css("height", "0px");
            $(".corsace").css("width", "0px");
          }
        });
      }
    }
  });

  $(document).keypress(function(e) {
    if(e.which == 13) {
        vinglishify();
    }
  });

  function vinglishify() {
    var value = $(".inputText").val().toLowerCase();
    var swapFactor = $("#swapFactor").val()
    var noiseFactor = $("#noiseFactor").val()
    var insertionRate = $("#insertionRate").val()
    var chars = '`1234567890)(*&^%$#@!~qwertyuiop[]`\\\';lkjhgfdsazxcvbnm,./';
    var arr = value.split('');
    for (var i = 0; i < arr.length - 1; i++) {
        if (swapFactor > Math.random()) {
            var swapVal = arr[i];
            arr[i] = arr[i+1];
            arr[i+1] = swapVal;
        }
        if (noiseFactor > Math.random()) {
            if (insertionRate > Math.random()) {
                arr.splice(i, 0, chars[chars.indexOf(arr[i]) + Math.floor(Math.random() * Math.floor(2))]);
            } else {
                arr.splice(i, 1);
            }
        }
    }
    $(".outputText").text(arr.join(''));
    console.log("Vinglishified!");
  }
  var swapFactorVal = document.getElementById("swapSliderValue");
  var noiseFactorVal = document.getElementById("noiseSliderValue");
  var insertionFactorVal = document.getElementById("insertionSliderValue");

  document.getElementById("swapFactor").oninput = function() {
    swapFactorVal.innerHTML = Number(this.value).toFixed(2);
  }
  document.getElementById("noiseFactor").oninput = function() {
    noiseFactorVal.innerHTML = Number(this.value).toFixed(2);
  }
  document.getElementById("insertionRate").oninput = function() {
    insertionFactorVal.innerHTML = Number(this.value).toFixed(2);
  }
  </script>
</body>
</html>